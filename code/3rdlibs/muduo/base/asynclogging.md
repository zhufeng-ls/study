# 异步日志

## 1. 依赖

* 阻塞队列
* 边界阻塞队列
* 闭锁
* 锁
* 线程
* 日志流
* 原子操作
* vector

## 2. 入参

* basename: 日志的基础名称
* rollSize: 回滚的文件大小
* flushInterval: 刷新的时间间隔

## 3. 开启

1. 使用`闭锁` 确保所有的线程都正常运行
2. 使用 `ThreadData` 来封装线程数据，有点像`建造者设计模式`。

## 4. 添加日志

1. 当缓冲区未满，则添加
2. 当缓冲区满了，则将满的缓冲区整理添加到存放多个缓冲区的容器中
3. 重置旧的缓冲区，若 `nextBuffer_` 存在，则转移所有权，否则重新申请新的内存