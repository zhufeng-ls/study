# 日志内部的处理流

## 1. 实现

### 1.1. 创建 buffer 类

创建一个存放数据的模板类，模板传入参数为缓冲区的大小(最大为`4000*1000`)。
包含了缓冲区的各种操作，且是无锁的，因为加锁的操作由调用它的外部类保证。

### 1.2. 创建日志流类

**1.2.1.**

* 类内部包含 buffer 类的对象。
* 类内部包含 `<<` 的各种重载，方便填充各种类型的数据。
* 同时开放一个 `buffer()` 或 `resetBuffer()` 来获取或重置类内部存放的数据。

## 创建一个类，类的内部有一个模板构造函数，比重载构造函数方便很多。

## 通用函数

### 整形转字符串

包含转普通的字符串和二进制的字符串

实现原理是使用一个 char[] 数据来存放所有的数字，然后根据取余数的原理在这个数组内找到对应的字符，最后使用 `std::reverse` 翻转拼接的字符串。

### 整数、浮点数转换为字符串

使用一个 Fmt 类，构造函数为模板函数， 接收两个参数，一个用来表示格式，一个为转换的数据。

主要通过封装 `snprintf` 来实现, 最大尺寸为 32。